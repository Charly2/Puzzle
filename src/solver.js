(function(){this.SolverState=function(){return function(t,e){var i;this.grid=t,i=this.grid.lowerSolutionBound(),this.steps=[].concat(e),this.solved=this.grid.isSolved(),this.val=i+e.length}}(),this.SolverStateMinHeap=function(){function t(){this.data=[]}return t.prototype.maxSize=1e5,t.prototype.enqueue=function(t){if(this.data.push(t),this.bubbleUp(this.data.length-1),this.data.length===this.maxSize)return this.data.pop()},t.prototype.dequeue=function(){var t,e;return e=this.data[0],t=this.data.pop(),this.data.length>0&&(this.data[0]=t,this.bubbleDown(0)),e},t.prototype.bubbleUp=function(t){var e,i,n;if(0!==t)return n=~~((t-1)/2),e=this.data[t],i=this.data[n],e.val<i.val?(this.data[t]=i,this.data[n]=e,this.bubbleUp(n)):void 0},t.prototype.bubbleDown=function(t){var e,i,n,a,o,r;if(n=2*t+1,o=2*t+2,e=this.data[t],i=this.data[n],a=this.data[o],r=null,null!=i&&i.val<e.val&&(r=n),null!=a&&a.val<i.val&&a.val<e.val&&(r=o),null!=r)return this.data[t]=this.data[r],this.data[r]=e,this.bubbleDown(r)},t.prototype.empty=function(){return 0===this.data.length},t}(),this.solve=function(t,e){var i,n,a,o,r,s,l,u,h,p,d,v,f,c,b,S;for(n=e.complete,o=e.error,r=e.frontier,null==n&&(n=$.noop),null==o&&(o=$.noop),null==r&&(r=new SolverStateMinHeap,b=new SolverState(t,[]),r.enqueue(b)),u=0;!r.empty();){if((u+=1)>1e3)return void window.setTimeout(function(){return solve(t,{complete:n,error:o,frontier:r})},10);if((a=r.dequeue()).solved)return S=a.steps,void n({steps:a.steps,iterations:u});for(s=a.grid,S=a.steps,i=_.shuffle(s.validMoves()),null!=(h=_.last(S))&&(i=_(i).filter(function(t){return!directionsAreOpposites(t,h)})),l=0,p=i.length;l<p;l++)c=i[l],d=s.applyMoveFrom(c),f=S.concat([c]),v=new SolverState(d,f),r.enqueue(v)}}}).call(this);